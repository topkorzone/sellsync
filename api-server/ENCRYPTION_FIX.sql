-- ============================================
-- ì•”í˜¸í™” í‚¤ ë³€ê²½ìœ¼ë¡œ ì¸í•œ ë°ì´í„° ì •ë¦¬
-- ============================================
-- 
-- ë³€ê²½ëœ í‚¤:
-- - JWT_SECRET: roDCIFYZmS4ji+ZhwFNJ3S9oEEk4iXRKWUYZ5yMa4wk=
-- - ENCRYPTION_KEY: ruwNCaVxeGCdBqdoVT5YdwqQMudlDBc4wD5LeAG+U1o=
-- 
-- ============================================
-- ì‚­ì œê°€ í•„ìš”í•œ ë°ì´í„°
-- ============================================
-- 
-- âœ… ì‚­ì œ í•„ìš”:
--    - credentials í…Œì´ë¸”ì˜ ì•”í˜¸í™”ëœ ì¸ì¦ ì •ë³´ (ENCRYPTION_KEY ë³€ê²½ ì˜í–¥)
--      â†’ ì›¹ ê´€ë¦¬ìì—ì„œ ì¬ë“±ë¡ í•„ìš”
-- 
-- âŒ ì‚­ì œ ë¶ˆí•„ìš” (ì˜í–¥ ì—†ìŒ):
--    - users (ì‚¬ìš©ì ì •ë³´)
--    - tenants (í…Œë„ŒíŠ¸/ìƒì  ì •ë³´)
--    - stores (ìŠ¤í† ì–´ ì •ë³´)
--    - orders (ì£¼ë¬¸ ë°ì´í„°)
--    - settlement_batches (ì •ì‚° ë°ì´í„°)
--    - erp_documents (ì „í‘œ ë°ì´í„°)
--    - ê¸°íƒ€ ëª¨ë“  ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°
-- 
-- ğŸ’¡ JWT_SECRET ë³€ê²½ ì˜í–¥:
--    - ê¸°ì¡´ JWT í† í°ì´ ë¬´íš¨í™”ë¨ â†’ ì‚¬ìš©ì ì¬ë¡œê·¸ì¸ í•„ìš”
--    - DBì—ëŠ” ì˜í–¥ ì—†ìŒ (JWTëŠ” DBì— ì €ì¥ë˜ì§€ ì•ŠìŒ)
-- 
-- ============================================
-- ì‹¤í–‰ ìˆœì„œ
-- ============================================
-- 
-- 1. Supabase SQL Editor (https://supabase.com/dashboard)ì— ì ‘ì†
-- 2. í”„ë¡œì íŠ¸ ì„ íƒ > SQL Editor
-- 3. ì•„ë˜ ì¿¼ë¦¬ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰
-- 4. Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì¬ì‹œì‘
-- 5. ì›¹ ê´€ë¦¬ì í™”ë©´ì—ì„œ ê° ìŠ¤í† ì–´ì˜ ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì¸ì¦ ì •ë³´ ì¬ë“±ë¡
-- 6. ì‚¬ìš©ìë“¤ì—ê²Œ ì¬ë¡œê·¸ì¸ ìš”ì²­
-- 
-- ============================================

-- ========================================
-- Step 1: ì‚­ì œ ì „ ë°±ì—… (ì„ íƒì‚¬í•­)
-- ========================================

-- í˜„ì¬ ì €ì¥ëœ ì¸ì¦ ì •ë³´ í™•ì¸
SELECT 
    id,
    tenant_id,
    store_id,
    credential_type,
    key_name,
    created_at,
    updated_at
FROM credentials
ORDER BY created_at DESC;

-- ì‚­ì œë  ë°ì´í„° ê°œìˆ˜ í™•ì¸
SELECT 
    credential_type,
    COUNT(*) as count
FROM credentials
GROUP BY credential_type;

-- ========================================
-- Step 2: ì•”í˜¸í™”ëœ ì¸ì¦ ì •ë³´ ì‚­ì œ
-- ========================================

-- MARKETPLACE íƒ€ì… ì¸ì¦ ì •ë³´ë§Œ ì‚­ì œ (ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´, ì¿ íŒ¡ ë“±)
DELETE FROM credentials WHERE credential_type = 'MARKETPLACE';

-- ERP ì¸ì¦ ì •ë³´ë„ ì•”í˜¸í™”ë˜ì–´ ìˆë‹¤ë©´ ì‚­ì œ
DELETE FROM credentials WHERE credential_type = 'ERP';

-- ë˜ëŠ” credentials í…Œì´ë¸” ì „ì²´ ì‚­ì œ
-- TRUNCATE TABLE credentials;

-- ========================================
-- Step 3: ì‚­ì œ í™•ì¸
-- ========================================

-- ë‚¨ì€ ë°ì´í„° í™•ì¸
SELECT COUNT(*) as remaining_credentials FROM credentials;

-- credential_typeë³„ ê°œìˆ˜
SELECT 
    credential_type,
    COUNT(*) as count
FROM credentials
GROUP BY credential_type;

-- ========================================
-- Step 4: ë‹¤ë¥¸ í…Œì´ë¸” í™•ì¸ (ì‚­ì œ ë¶ˆí•„ìš”)
-- ========================================

-- ì‚¬ìš©ì ë°ì´í„° í™•ì¸ (ì •ìƒ ìœ ì§€ë˜ì–´ì•¼ í•¨)
SELECT COUNT(*) as total_users FROM users;

-- ìŠ¤í† ì–´ ë°ì´í„° í™•ì¸ (ì •ìƒ ìœ ì§€ë˜ì–´ì•¼ í•¨)
SELECT COUNT(*) as total_stores FROM stores;

-- ì£¼ë¬¸ ë°ì´í„° í™•ì¸ (ì •ìƒ ìœ ì§€ë˜ì–´ì•¼ í•¨)
SELECT COUNT(*) as total_orders FROM orders;

-- ========================================
-- ì™„ë£Œ!
-- ========================================
-- 
-- ë‹¤ìŒ ë‹¨ê³„:
-- 1. âœ… Spring Boot ì¬ì‹œì‘
-- 2. âœ… ì›¹ ê´€ë¦¬ìì—ì„œ ë§ˆì¼“í”Œë ˆì´ìŠ¤ ì¸ì¦ ì •ë³´ ì¬ë“±ë¡
-- 3. âœ… ì‚¬ìš©ìë“¤ ì¬ë¡œê·¸ì¸
-- 
-- âš ï¸ ì£¼ì˜: 
-- - ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°(ì£¼ë¬¸, ì •ì‚°, ì „í‘œ)ëŠ” ëª¨ë‘ ë³´ì¡´ë©ë‹ˆë‹¤
-- - ì¸ì¦ ì •ë³´ë§Œ ë‹¤ì‹œ ì…ë ¥í•˜ë©´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤
-- ========================================
