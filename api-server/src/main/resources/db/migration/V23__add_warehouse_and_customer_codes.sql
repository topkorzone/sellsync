-- =====================================================
-- V23: 창고코드 및 거래처코드 추가
-- =====================================================
-- 설명: ERP 전표 생성시 스토어별 거래처코드와 품목별 창고코드를 사용하도록 개선
-- =====================================================

-- =====================================================
-- 1. stores 테이블에 ERP 거래처코드 추가
-- =====================================================
-- 스토어별로 ERP 거래처코드를 설정할 수 있도록 함
ALTER TABLE stores 
ADD COLUMN erp_customer_code VARCHAR(50);

COMMENT ON COLUMN stores.erp_customer_code IS 'ERP 거래처코드 (스토어별 설정)';

-- =====================================================
-- 2. erp_items 테이블에 창고코드 추가
-- =====================================================
-- ERP 상품 동기화시 재고 정보와 함께 창고코드를 저장
ALTER TABLE erp_items 
ADD COLUMN warehouse_code VARCHAR(50);

COMMENT ON COLUMN erp_items.warehouse_code IS '창고코드 (재고가 보관된 창고)';

-- =====================================================
-- 3. erp_document_lines 테이블에 창고코드 추가
-- =====================================================
-- 전표 라인별로 다른 창고코드를 사용할 수 있도록 함
ALTER TABLE erp_document_lines 
ADD COLUMN warehouse_code VARCHAR(50);

COMMENT ON COLUMN erp_document_lines.warehouse_code IS '창고코드 (라인별 출고 창고)';

-- =====================================================
-- 마이그레이션 완료
-- =====================================================
-- 이제 시스템은:
-- 1. 스토어별로 ERP 거래처코드 설정 가능
-- 2. ERP 상품 동기화시 창고코드 자동 저장
-- 3. 전표 생성시 스토어의 거래처코드와 품목의 창고코드를 자동으로 사용
-- =====================================================
